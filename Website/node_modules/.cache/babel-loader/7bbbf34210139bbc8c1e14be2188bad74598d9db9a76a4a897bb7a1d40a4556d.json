{"ast":null,"code":"import React from'react';import'./navbar.css';// import './main2.css'\nimport'./rank.css';import firebase from'firebase/compat/app';import'firebase/compat/auth';import'firebase/compat/firestore';import{Chart,ArcElement,Tooltip,Legend}from'chart.js';import NavigationLinks from'./components/navigation-links';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";Chart.register(ArcElement,Tooltip,Legend);const firebaseConfig={apiKey:\"AIzaSyBYq-OcMmsJBx5CMYVASBBJNZE9bBrwqLA\",authDomain:\"kingdom1418-rok.firebaseapp.com\",projectId:\"kingdom1418-rok\",storageBucket:\"kingdom1418-rok.appspot.com\",messagingSenderId:\"52859370206\",appId:\"1:52859370206:web:95983696b1f350397fa04f\",measurementId:\"G-5QTEHKEFNL\"};firebase.initializeApp(firebaseConfig);var RankingType=/*#__PURE__*/function(RankingType){RankingType[\"Kills\"]=\"Kills\";RankingType[\"Deaths\"]=\"Deaths\";return RankingType;}(RankingType||{});const Pagination=_ref=>{let{currentPage,totalPages,onPageChange}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"pagination\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onPageChange(Math.max(currentPage-1,1)),disabled:currentPage===1,children:\"< Prev\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onPageChange(Math.min(currentPage+1,totalPages)),disabled:currentPage===totalPages,children:\"Next >\"})]});};export class Ranking extends React.Component{constructor(props){super(props);this.fetchAllPlayerData=async()=>{try{const db=firebase.firestore();const playersCollection=db.collection('JUN_2024_KVK');const querySnapshot=await playersCollection.get();const playerDataArray=[];querySnapshot.forEach(doc=>{if(doc.exists){const data=doc.data();playerDataArray.push(data);}});return playerDataArray;}catch(error){return[];}};this.rankPlayers=(playerDataList,type,pass)=>{return playerDataList.sort((a,b)=>{let valueA,valueB;if(pass==='pass4'){if(type===RankingType.Kills){var _a$web_total,_b$web_total;valueA=(_a$web_total=a.web_total)!==null&&_a$web_total!==void 0?_a$web_total:0;// Use 0 as the default value if Pass4TotalKills is undefined\nvalueB=(_b$web_total=b.web_total)!==null&&_b$web_total!==void 0?_b$web_total:0;}else if(type===RankingType.Deaths){var _a$Pass4_Deaths,_b$Pass4_Deaths;valueA=(_a$Pass4_Deaths=a.Pass4_Deaths)!==null&&_a$Pass4_Deaths!==void 0?_a$Pass4_Deaths:0;// Use 0 as the default value if Pass4Deads is undefined\nvalueB=(_b$Pass4_Deaths=b.Pass4_Deaths)!==null&&_b$Pass4_Deaths!==void 0?_b$Pass4_Deaths:0;}}else if(pass==='Altar'){if(type===RankingType.Kills){var _ref2,_ref3;valueA=(_ref2=a.Pass5_T4_Kills+a.Pass5_T5_Kills)!==null&&_ref2!==void 0?_ref2:0;// Use 0 as the default value if Pass4TotalKills is undefined\nvalueB=(_ref3=b.Pass5_T4_Kills+b.Pass5_T5_Kills)!==null&&_ref3!==void 0?_ref3:0;}else if(type===RankingType.Deaths){var _a$Pass5_Deaths,_b$Pass5_Deaths;valueA=(_a$Pass5_Deaths=a.Pass5_Deaths)!==null&&_a$Pass5_Deaths!==void 0?_a$Pass5_Deaths:0;// Use 0 as the default value if Pass4Deads is undefined\nvalueB=(_b$Pass5_Deaths=b.Pass5_Deaths)!==null&&_b$Pass5_Deaths!==void 0?_b$Pass5_Deaths:0;}}else if(pass==='pass7'){if(type===RankingType.Kills){var _ref4,_ref5;valueA=(_ref4=a.Pass7_T4_Kills+a.Pass7_T5_Kills)!==null&&_ref4!==void 0?_ref4:0;// Use 0 as the default value if Pass4TotalKills is undefined\nvalueB=(_ref5=b.Pass7_T4_Kills+b.Pass7_T5_Kills)!==null&&_ref5!==void 0?_ref5:0;}else if(type===RankingType.Deaths){var _a$Pass7_Deaths,_b$Pass7_Deaths;valueA=(_a$Pass7_Deaths=a.Pass7_Deaths)!==null&&_a$Pass7_Deaths!==void 0?_a$Pass7_Deaths:0;// Use 0 as the default value if Pass4Deads is undefined\nvalueB=(_b$Pass7_Deaths=b.Pass7_Deaths)!==null&&_b$Pass7_Deaths!==void 0?_b$Pass7_Deaths:0;}}else{if(type===RankingType.Kills){var _a$web_total2,_ref6,_ref7,_b$web_total2,_ref8,_ref9;valueA=((_a$web_total2=a.web_total)!==null&&_a$web_total2!==void 0?_a$web_total2:0)+((_ref6=a.Pass5_T4_Kills+a.Pass5_T5_Kills)!==null&&_ref6!==void 0?_ref6:0)+((_ref7=a.Pass7_T4_Kills+a.Pass7_T5_Kills)!==null&&_ref7!==void 0?_ref7:0);// Use 0 as the default value if Pass4TotalKills is undefined\nvalueB=((_b$web_total2=b.web_total)!==null&&_b$web_total2!==void 0?_b$web_total2:0)+((_ref8=b.Pass5_T4_Kills+b.Pass5_T5_Kills)!==null&&_ref8!==void 0?_ref8:0)+((_ref9=b.Pass7_T4_Kills+b.Pass7_T5_Kills)!==null&&_ref9!==void 0?_ref9:0);}else if(type===RankingType.Deaths){var _a$Pass4_Deaths2,_a$Pass5_Deaths2,_a$Pass7_Deaths2,_b$Pass4_Deaths2,_b$Pass5_Deaths2,_b$Pass7_Deaths2;valueA=((_a$Pass4_Deaths2=a.Pass4_Deaths)!==null&&_a$Pass4_Deaths2!==void 0?_a$Pass4_Deaths2:0)+((_a$Pass5_Deaths2=a.Pass5_Deaths)!==null&&_a$Pass5_Deaths2!==void 0?_a$Pass5_Deaths2:0)+((_a$Pass7_Deaths2=a.Pass7_Deaths)!==null&&_a$Pass7_Deaths2!==void 0?_a$Pass7_Deaths2:0);// Use 0 as the default value if Pass4Deads is undefined\nvalueB=((_b$Pass4_Deaths2=b.Pass4_Deaths)!==null&&_b$Pass4_Deaths2!==void 0?_b$Pass4_Deaths2:0)+((_b$Pass5_Deaths2=b.Pass5_Deaths)!==null&&_b$Pass5_Deaths2!==void 0?_b$Pass5_Deaths2:0)+((_b$Pass7_Deaths2=b.Pass7_Deaths)!==null&&_b$Pass7_Deaths2!==void 0?_b$Pass7_Deaths2:0);}}if(valueB===undefined||valueA===undefined){return 0;}return valueB-valueA;});};this.toggleMenu=()=>{this.setState({isMenuOpen:!this.state.isMenuOpen});};this.handleRankingTypeChange=event=>{this.rankPlayers(this.state.playerList,event.target.value,this.state.pass);this.setState({rankingType:event.target.value});};this.handlePassChange=event=>{this.rankPlayers(this.state.playerList,this.state.rankingType,event.target.value);this.setState({pass:event.target.value});};this.render=()=>{const{playerList,currentPage,rowsPerPage,rankingType}=this.state;const totalRows=playerList.length;const totalPages=Math.ceil(totalRows/rowsPerPage);const lastRowIndex=currentPage*rowsPerPage;const currentRows=playerList.slice((currentPage-1)*rowsPerPage,currentPage*rowsPerPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsxs(\"header\",{\"data-thq\":\"thq-navbar\",className:\"home-navbar-interactive\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"home-text\",children:\"Kingdom 1418 - 43\"}),/*#__PURE__*/_jsx(\"div\",{className:\"home-container1\",children:/*#__PURE__*/_jsx(\"div\",{\"data-thq\":\"thq-navbar-nav\",className:\"home-desktop-menu\",children:/*#__PURE__*/_jsx(NavigationLinks,{rootClassName:\"rootClassName17\"})})}),/*#__PURE__*/_jsx(\"div\",{\"data-thq\":\"thq-burger-menu\",className:\"home-burger-menu\",onClick:this.toggleMenu,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 1024 1024\",className:\"home-icon\",style:{fill:\"white\"},children:/*#__PURE__*/_jsx(\"path\",{d:\"M128 554.667h768c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667h-768c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667zM128 298.667h768c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667h-768c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667zM128 810.667h768c23.552 0 42.667-19.115 42.667-42.667s-19.115-42.667-42.667-42.667h-768c-23.552 0-42.667 19.115-42.667 42.667s19.115 42.667 42.667 42.667z\"})})}),/*#__PURE__*/_jsx(\"div\",{\"data-thq\":\"thq-mobile-menu\",className:\"home-mobile-menu \".concat(this.state.isMenuOpen?'open':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-nav\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-top\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"home-text01\",children:\"Kingdom 1418\"}),/*#__PURE__*/_jsx(\"div\",{\"data-thq\":\"thq-close-menu\",className:\"home-close-menu\",onClick:this.toggleMenu,children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 1024 1024\",className:\"home-icon02\",style:{fill:\"white\"},children:/*#__PURE__*/_jsx(\"path\",{d:\"M810 274l-238 238 238 238-60 60-238-238-238 238-60-60 238-238-238-238 60-60 238 238 238-238z\"})})})]}),/*#__PURE__*/_jsx(\"nav\",{className:\"home-links\",children:/*#__PURE__*/_jsx(NavigationLinks,{rootClassName:\"rootClassName14\"})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"ranking-title\",children:\"Player Rankings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"ranking-instructions\",children:\"Use the dropdown menus to filter rankings by Kills/Deaths and by Pass. Navigate through the table pages with the Prev and Next buttons.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ranking-controls\",children:[/*#__PURE__*/_jsxs(\"select\",{value:rankingType,onChange:this.handleRankingTypeChange,className:\"ranking-dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{value:RankingType.Kills,children:\"Kills\"}),/*#__PURE__*/_jsx(\"option\",{value:RankingType.Deaths,children:\"Deaths\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:this.state.pass,onChange:this.handlePassChange,className:\"ranking-dropdown\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"pass4\",children:\"Pass 4\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Altar\",children:\"Pass 7\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pass7\",children:\"Pass 8\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pass9\",children:\"total\"})]})]}),/*#__PURE__*/_jsx(Pagination,{currentPage:currentPage,totalPages:totalPages,onPageChange:page=>this.setState({currentPage:page})}),/*#__PURE__*/_jsxs(\"table\",{className:\"ranking-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Kills/Deaths\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:this.state.load&&currentRows.map((player,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:(currentPage-1)*rowsPerPage+index+1}),/*#__PURE__*/_jsx(\"td\",{children:player.name}),/*#__PURE__*/_jsx(\"td\",{children:this.state.rankingType===RankingType.Kills?this.state.pass===\"pass4\"?(player.web_total||0).toLocaleString():this.state.pass===\"Altar\"?(player.Pass5_T4_Kills+player.Pass5_T5_Kills).toLocaleString():this.state.pass===\"pass7\"?(player.Pass7_T4_Kills+player.Pass7_T5_Kills).toLocaleString():this.state.pass===\"pass9\"?((player.web_total||0)+player.Pass5_T4_Kills+player.Pass5_T5_Kills+player.Pass7_T4_Kills+player.Pass7_T5_Kills).toLocaleString():(player.KL_T4_Kills+player.KL_T5_Kills).toLocaleString():this.state.pass===\"pass4\"?player.Pass4_Deaths.toLocaleString():this.state.pass===\"Altar\"?player.Pass5_Deaths.toLocaleString():this.state.pass===\"pass7\"?player.Pass7_Deaths.toLocaleString():this.state.pass===\"pass9\"?(player.Pass4_Deaths+player.Pass5_Deaths+player.Pass7_Deaths).toLocaleString():player.KL_Deaths.toLocaleString()})]},player.Id))})]})]}),/*#__PURE__*/_jsx(\"footer\",{className:\"home-footer\",children:/*#__PURE__*/_jsx(\"span\",{className:\"home-text15\",children:\"\\xA9 2024 All Rights Reserved.\"})})]});};this.state={load:false,currentPage:1,rowsPerPage:50,page:'Home',password:\"\",accPage:\"Sign\",rankingType:RankingType.Kills,pass:\"pass4\",playerList:[],isMenuOpen:false,playerData:{Id:'',name:'',DeathReq:0,KillReq:0,Pass4_Deaths:0,Pass4_T4_Kills:0,Pass4_T5_Kills:0,Pass4_Total_kills:0,Pass5_Deaths:0,Pass5_T4_Kills:0,Pass5_T5_Kills:0,Pass5_Total_kills:0,Pass7_Deaths:0,Pass7_T4_Kills:0,Pass7_T5_Kills:0,Pass7_Total_kills:0,KL_Deaths:0,KL_T4_Kills:0,KL_T5_Kills:0,KL_Total_kills:0,Power:0,Total_Kills:0,T4_Kills:0,T5_Kills:0,web_total:0}};}async componentDidMount(){const playerDataArray=await this.fetchAllPlayerData();const rankedPlayers=this.rankPlayers(playerDataArray,this.state.rankingType,this.state.pass);this.setState({playerList:rankedPlayers,load:true});}}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}